function Poll(){this.attachEvents()}function StickyBlock(a,b){var c=this;this.topPaddingForSticking=b.topPaddingForSticking||0,this.bottomPaddingForSticking=b.bottomPaddingForSticking||0,this.leftPaddingForSticking=b.leftPaddingForSticking||0,this.topBottomContainerPaddings=b.topBottomContainerPaddings||0,this.$block=$(a),this.fixedWidth=b.width,this.blockHeight=b.blockHeight,this.callbacks=b.callbacks||{},this.$bottomStickBoundElement=b.bottomStickBoundElement?$(b.bottomStickBoundElement):null,this.$bottomStickBoundContainer=b.bottomStickBoundContainer?$(b.bottomStickBoundContainer):null,this.$upperStickBoundElement=b.upperStickBoundElement?$(b.upperStickBoundElement):null,this.$upperStickBoundContainer=b.upperStickBoundContainer?$(b.upperStickBoundContainer):null,this.$leftStickBoundElement=b.leftStickBoundElement?$(b.leftStickBoundElement):null,this.$leftStickBoundContainer=b.leftStickBoundContainer?$(b.leftStickBoundContainer):null,this.layoutConfig={topSticked:{},bottomSticked:{}},b.layoutConfig&&(this.layoutConfig.topSticked=b.layoutConfig.topSticked||{},this.layoutConfig.bottomSticked=b.layoutConfig.bottomSticked||{}),this.$block.width(this.fixedWidth||this.$block.parent().outerWidth()),this.isTopSticked=ko.observable(!1),this.isBottomSticked=ko.observable(!1),this.topOffset=ko.observable(0),$(window).on("scroll",function(){if(!c._isEnoughSpace())return c.isTopSticked(!1),void c.isBottomSticked(!1);c._fixPosition(),c.callbacks.onScroll&&c.callbacks.onScroll()}),$(window).on("resize",function(){c.isTopSticked(c._isTopSticked()),c.isBottomSticked(c._isBottomSticked()),c.topOffset(c._getTopPosition()),c.initialOffsetTop=c._getUpperBound(),(c.$leftStickBoundElement||c.$leftStickBoundContainer)&&(c.layoutConfig.topSticked.left=c._getLeftBoundOffset(),c.layoutConfig.bottomSticked.left=c._getLeftBoundPosition(),c._fixPosition()),c.$block.width(c.fixedWidth||c.$block.parent().outerWidth()),c.callbacks.onResize&&c.callbacks.onResize()}),this._isEnoughSpace()?(this._fixPosition(),this.isTopSticked(this._isTopSticked()),this.isBottomSticked(this._isBottomSticked()),this.topOffset(this._getTopPosition())):(c.isTopSticked(!1),c.isBottomSticked(!1)),setInterval(function(){c._fixPosition()},200)}function YoutubeTv(a,b){var c=new Plyr(a,{controls:["play-large","progress","mute","volume"]}),d=0;c.on("ended",function(){d++,d>=b.length&&(d=0),c.embed.loadVideoById(b[d])})}$(window).load(function(){var a=$(".instagram-media");a.css("height","auto").delay("100").queue(function(){a.css("height","")})}),function(){"use strict";$(document).ready(function(){function a(a){$(d.newsTidings).addClass(e.newsTidingsAnimated),$.ajax({method:"GET",url:a,dataType:"json",cache:!1,success:function(c){$(".news-tidings__list").html(c.body),$(d.newsTidings).removeClass(e.newsTidingsAnimated),f.attr("href",a),window.history.pushState(null,"",a),c.isShowMoreAvailable?f.parents(d.showMoreLink).addClass(e.showMoreVisible):f.parents(d.showMoreLink).removeClass(e.showMoreVisible),b()}})}function b(){if(window.ONTHE_TRACK&&window.ONTHE_DATA){var a=_.clone(window.ONTHE_DATA),b=window.location;a.page_url=b.href,a.page_url_canonical=b.origin+b.pathname,window.ONTHE_TRACK(a)}}var c=$(".js-rubric"),d={showMoreLink:".news-more",newsTidings:".news-tidings",newsTidingsList:".news-tidings__list",item:".news-rubrics__item"},e={itemActive:"news-rubrics__item_active",showMoreVisible:"news-more_visible",newsTidingsAnimated:"news-tidings_animated",newsTidingsListAnimated:"news-tidings__list_animated",buttonAnimated:"button-style_animated"},f=$(".js-show-more-news"),g=!1;f.click(function(a){a.preventDefault();var b=$(".news-tidings__list .news-tidings__item:last").data("post-date"),c=$(a.currentTarget);g||(g=!0,f.addClass(e.buttonAnimated),$(d.newsTidingsList).addClass(e.newsTidingsListAnimated),$.get(c.attr("href")+"?fromDate="+b,function(a){var b=window.pageYOffset||document.documentElement.scrollTop;$(".news-tidings__list").append(a.body),window.scrollTo(0,b),g=!1,f.removeClass(e.buttonAnimated),$(d.newsTidingsList).removeClass(e.newsTidingsListAnimated),!a.isShowMoreAvailable&&c.parents(d.showMoreLink).removeClass(e.showMoreVisible)},"json"))}),c.click(function(b){var f=b.which||b.keyCode,g=b.currentTarget,h=g.href;b.preventDefault(),2===f||1===f&&(b.metaKey||b.ctrlKey)?window.open(h):1===f&&(c.closest(d.item).removeClass(e.itemActive),$(g).closest(d.item).addClass(e.itemActive),a(h))})})}(),$(document).ready(function(){"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0==this.indexOf(a)}),OldPoll.init(),NewsViewCounter.init(".news_view_count",".show_news_view_count","news_id")});var OldPoll={init:function(){$("#vote_answer1, #vote_answer2").live("click",function(){return OldPoll.vote.bind(this)(),!1})},vote:function(){$.ajax({type:"GET",url:$(this).attr("href")+"?"+(new Date).getTime(),dataType:"json",complete:function(){return!1},error:function(a,b){ONotice.notify(b)},success:function(a){if(a.error)switch(a.error){case"POST_NOT_FOUND":case"USER_NOT_AUTHORIZED":document.location.href=a.redirectUrl;break;case"INCORRECT_ANSWER":ONotice.notify(a.text);break;case"POLLING_NOT_FOUND":window.location.reload()}else $("#vote_results").html(a.result),OldPoll.calcAnswersFontSize()}})}},NewsViewCounter={showContainer:"",viewContainer:"",attrId:"",init:function(a,b,c){this.viewContainer=a,this.showContainer=b,this.attrId=c,this.view(),this.countView()},countView:function(){var a=Array();$(this.showContainer).each(function(){a.push($(this).attr(NewsViewCounter.attrId))}),a.length>0&&$.ajax({type:"GET",url:"/viewcounter/count/",data:{news:a,token:(new Date).getTime()},dataType:"json",success:function(a){a.count?NewsViewCounter.show(a.count):NewsViewCounter.show(Array())},error:function(){NewsViewCounter.show(Array())}})},view:function(){var a=Array();$(NewsViewCounter.viewContainer).each(function(){a.push($(this).attr(NewsViewCounter.attrId))}),a.length>0&&$.ajax({type:"POST",url:"/viewcounter/view/",data:{news:a},dataType:"json",complete:function(a){NewsViewCounter.countView()}})},show:function(a){var b;$(this.showContainer).each(function(){b=$(this).attr(NewsViewCounter.attrId),a[b]?$(this).text(". Просмотров: "+a[b]):$(this).text(". Просмотров: 0")})}};$(document).ready(function(){$(window).on("resize",function(){$(".news-overflow").each(function(){var a=$(this),b=$(".news-overflow__slice",a),c=$("> *",b),d=a.outerWidth();c.outerWidth()>d?a.addClass("news-overflow_stripe_right"):a.removeClass("news-overflow_stripe_right")})}),$(window).trigger("resize")}),$(document).ready(function(){function a(a,b,c,d){a.on("mousedown vmousedown touchstart",function(c){a.addClass("draggable"),b.addClass("resizable");var e=a.outerWidth(),f=a.offset().left+e-(c.pageX||c.originalEvent.touches[0].pageX),g=d.offset().left,h=d.outerWidth(),i=g+10,j=g+h-e-10;a.parents().on("mousemove vmousemove touchmove",function(a){leftValue=(a.pageX||a.originalEvent.touches[0].pageX)+f-e,leftValue<i?leftValue=i:leftValue>j&&(leftValue=j),widthValue=100*(leftValue+e/2-g)/h+"%",$(".draggable").css("left",widthValue).on("mouseup vmouseup touchend",function(){$(this).removeClass("draggable"),b.removeClass("resizable")}),$(".resizable").css("width",widthValue)}).on("mouseup vmouseup touchend",function(c){a.removeClass("draggable"),b.removeClass("resizable")}),c.preventDefault()}).on("mouseup vmouseup touchend",function(c){a.removeClass("draggable"),b.removeClass("resizable")}),$(window).on("resize",function(){var a=d.outerWidth(),b=parseInt(a/2)+"px";c.length&&c.css("width",b)}),$(window).load(function(){a.length&&a.fadeIn(200),c.length&&c.fadeIn(200),$(window).trigger("resize")})}$(".js-compare").each(function(){var b=$(this);a(b.find(".js-compare-runner"),b.find(".js-compare-segment"),b.find(".js-compare-caption"),b)})}),$(document).ready(function(){!function(){$(".js-gallery").each(function(){function a(){if(window.matchMedia("(min-width: 768px)").matches&&i||window.matchMedia("(min-width: 1001px)").matches&&j||window.matchMedia("(max-width: 767px)").matches&&k||window.matchMedia("(max-width:1000px)").matches&&l)e.initialized&&e.destroy();else{if(m){var a=h.outerWidth();o.css("width",a)}e.initialized?e.reload():e.init()}}function b(){e.on("change",function(){n.addClass(s)}),e.on("moveEnd",function(){n.removeClass(s),d(g),g=!0}),e.on("active",function(){g=!1}),q.on("click",function(){g=!1}),r.on("click",function(){g=!1}),$(window).on("resize",function(){setTimeout(a,300)})}function c(){var a=e.rel.firstItem,b=e.rel.lastItem,c=e.rel.centerItem,d=e.pos.start,f=e.pos.end,g=e.pos.cur;return g===d?a:g===f?b:c}function d(a){var b=c();a&&e.activate(b)}var e,f=$(this),g=!0,h=f.find(".js-gallery-sly"),i=h.data("show-mobile")||!1,j=h.data("show-tablet")||!1,k=h.data("hide-mobile")||!1,l=h.data("hide-tablet")||!1,m=h.data("width-full")||!1,n=h.children(),o=n.children(),p=(o.length,f.find(".js-gallery-sly-pages-bar")),q=f.find(".js-gallery-sly-prev"),r=f.find(".js-gallery-sly-next"),s="dragged",t="active",u="disabled",v=Onliner.isMobile;!function(){h.length&&(e=new Sly(h,{horizontal:!0,itemNav:"centered",smart:!0,mouseDragging:!v,touchDragging:v,releaseSwing:!0,startAt:0,scrollBy:1,speed:300,elasticBounds:!0,dragHandle:!0,dynamicHandle:!0,clickBar:!0,pagesBar:p,activatePageOn:"click",pageBuilder:function(a){return'<div class="item">'+(a+1)+"</div>"},prev:q,next:r,draggedClass:s,activeClass:t,disabledClass:u}),a(),b())}()})}()}),$(document).ready(function(){var a=[];$(".js-swiper").each(function(b,c){function d(a){h.css("top",g.find(a).first().height()-56)}var e,f=$(c),g=f.find(".js-gallery-swiper"),h=f.find(".js-gallery-swiper-pages-bar"),i=f.find(".js-gallery-swiper-next"),j=f.find(".js-gallery-swiper-prev");h.hide(),e=new Swiper(g,{slidesPerView:1,paginationClickable:!0,bulletClass:"item",bulletActiveClass:"active",spaceBetween:40,loop:!0,pagination:h,paginationElement:"div",nextButton:i,prevButton:j,preloadImages:!1,updateOnImagesReady:!1,lazyLoading:!0,lazyLoadingInPrevNext:!0,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!0}),e.on("slideChangeStart",function(){d(".swiper-slide-active .news-media__preview")}),$(window).on("load",function(){d(".swiper-slide-active .news-media__preview"),h.show()}),$(window).resize(function(){setTimeout(function(){d(".swiper-slide-active .news-media__preview")},10)}),a.push(e)})}),$(document).ready(function(){function a(a){return a-f.parent().offset().top>0}var b=document.getElementById("project-navigation"),c=document.getElementById("project-navigation-stub");if(b&&c&&function(){return!window.matchMedia||window.matchMedia("(min-width: 1001px)").matches}()&&!(navigator.userAgent.indexOf("Opera")>=0)){var d=$(b).parent().first(),e=new StickyBlock(b,{upperStickBoundContainer:d,bottomStickBoundContainer:d,leftStickBoundContainer:d,paddingForSticking:0,layoutConfig:{topSticked:{left:d.offset().left}}}),f=$("#project-navigation"),g=f.outerHeight(),h=0,i=0,j=g+5,k=window.location.hash,l=$(document).scrollTop();b&&ko.applyBindings(e,b),b&&ko.applyBindings(e,c),$(document).on("scroll",function(){var b=$(window).scrollTop();if(window.isSilentScroll||window.lockPanel)return void(i=b);if(window.isAutoScroll)return i=b,h=j,void f.css("top",-j);var c=b-i,d=a(b);d&&(h+=c),h=Math.min(Math.max(0,h),j),f.css("top",d?-h:0),i=b}),k.length>1&&(a(l)&&(h=j,f.css("top",-j)),$(window).on("load",function(){setTimeout(function(){a($(document).scrollTop())&&(h=j,f.css("top",-j))},300)}))}}),function(){"use strict";$(document).ready(function(){new Poll})}(),Poll.prototype.attachEvents=function(){var a=this;$(".js-vote-button").click(function(b){b.preventDefault();var c=$(b.currentTarget).parents(".news-vote:first"),d=c.data("post-id"),e=c.data("poll-id"),f=c.find("input[type=radio]:checked"),g=f.length?a.getUrl(e,d,f.val()):$(b.currentTarget).data("url");a.vote(e,g)})},Poll.prototype.getUrl=function(a,b,c){return"/poll/"+parseInt(a)+"/post/"+b+"/variant/"+c},Poll.prototype.vote=function(a,b){b&&$.ajax({type:"POST",url:b+"?"+(new Date).getTime(),dataType:"json",complete:function(){return!1},error:function(a,b){ONotice.notify(b)},success:function(b){if(b.error)switch(b.error){case"USER_NOT_SMS_VALIDATED":window.profileAuth&&window.profileAuth.validatePhone();break;case"POST_NOT_FOUND":case"USER_NOT_AUTHORIZED":document.location.href=b.redirectUrl;break;case"INCORRECT_ANSWER":ONotice.notify(b.text);break;case"POLLING_NOT_FOUND":window.location.reload()}else $("#poll_"+parseInt(a,10)).replaceWith(b.result)}})},StickyBlock.prototype.updateOptions=function(a){$.extend(this.options,a)},StickyBlock.prototype._getTopPosition=function(){var a=0,b=this._isBottomSticked(),c=this._isTopSticked(b),d=this._getBottomBoundPosition();return c&&(a=(this.layoutConfig.topSticked.top||this.topPaddingForSticking)+"px"),b&&(a=d-this.$block.outerHeight()-this.bottomPaddingForSticking+"px"),b&&!this.$bottomStickBoundElement&&this.$bottomStickBoundContainer?"initial":a},StickyBlock.prototype._isTopSticked=function(a){return window.pageYOffset>this._getUpperBound()&&!a},StickyBlock.prototype._isBottomSticked=function(){var a=this._getBottomBoundOffset(),b=this.blockHeight||this.$block.outerHeight();return window.pageYOffset+b>a-this.bottomPaddingForSticking},StickyBlock.prototype._fixPosition=function(){var a,b,c,d=this._isTopSticked();if(!this._isEnoughSpace())return this.isTopSticked(!1),void this.isBottomSticked(!1);this.isTopSticked(d),this.isBottomSticked(this._isBottomSticked()),this.topOffset(this._getTopPosition()),a=this.$block.children().length&&this.$block.children().first().outerHeight(),a&&this.$block.height(a),b=this._getStickType(),"topSticked"===b?this.$block.css("margin-left",-window.pageXOffset+"px"):this.$block.css("margin-left",""),c=this.layoutConfig&&this.layoutConfig[b]&&this.layoutConfig[b].left?this.layoutConfig[b].left:0,(this.$leftStickBoundElement||this.$leftStickBoundContainer)&&this.$block.css({left:c})},StickyBlock.prototype._getUpperBound=function(){var a=this.layoutConfig.topSticked.top||0;return this.$upperStickBoundElement?this.$upperStickBoundElement.offset().top+this.$upperStickBoundElement.outerHeight()+this.topPaddingForSticking-a:this.$upperStickBoundContainer.offset().top+this.topPaddingForSticking-a},StickyBlock.prototype._getBottomBoundOffset=function(){return this.$bottomStickBoundElement?this.$bottomStickBoundElement.offset().top:this.$bottomStickBoundContainer.offset().top+this.$bottomStickBoundContainer.height()},StickyBlock.prototype._getBottomBoundPosition=function(){return this.$bottomStickBoundElement?this.$bottomStickBoundElement.position().top:this.$bottomStickBoundContainer.position().top+this.$bottomStickBoundContainer.height()},StickyBlock.prototype._getLeftBoundOffset=function(){return this.$leftStickBoundElement?this.$leftStickBoundElement.offset().left+this.$leftStickBoundElement.outerWidth()+this.leftPaddingForSticking:this.$leftStickBoundContainer.offset().left},StickyBlock.prototype._getLeftBoundPosition=function(){return this.$leftStickBoundElement?this.$leftStickBoundElement.position().left+this.$leftStickBoundElement.outerWidth()+this.leftPaddingForSticking:this.$leftStickBoundContainer.position().left},StickyBlock.prototype._getStickType=function(){return this.isTopSticked()?"topSticked":this.isBottomSticked()?"bottomSticked":"notSticked;"},StickyBlock.prototype._isEnoughSpace=function(){var a=this.blockHeight||this.$block.children().first().outerHeight();return this._getBottomBoundOffset()-this._getUpperBound()>a+this.topBottomContainerPaddings},jQuery.extend({getUrlVars:function(a){var b,c=[];if(void 0===a)var d=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");else var d=a.slice(a.indexOf("?")+1).split("&");for(var e=0;e<d.length;e++)b=d[e].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b)[a]},getUnixTimestamp:function(){return Math.round(((new Date).getTime()-Date.UTC(1970,0,1))/1e3)},template:function(a,b){var c,d;return a=a||"",b=b||{},c=/#\{([^{}]*)}/g,d=function(a,c){return"string"==typeof b[c]||"number"==typeof b[c]?b[c]:a},a.replace(c,d)},getSplitValue:function(a){var b=a.split("_");return b[$(b).length-1]}}),function(a){"use strict";a(["jquery"],function(a){function b(b){return a.isFunction(b)||a.isPlainObject(b)?b:{top:b,left:b}}var c=a.scrollTo=function(b,c,d){return a(window).scrollTo(b,c,d)};return c.defaults={axis:"xy",duration:0,limit:!0},c.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this;if(b.nodeName&&-1==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]))return b;var c=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||"BackCompat"==c.compatMode?c.body:c.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){j.animate(l,e,f.easing,a&&function(){a.call(this,k,f)})}if(null!=d){var h,i=this,j=a(i),k=d,l={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}if(k=m?a(k):a(k,this),!k.length)return;case"object":(k.is||k.style)&&(h=(k=a(k)).offset())}var n=a.isFunction(f.offset)&&f.offset(i,k)||f.offset;a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),o="scroll"+d,p=i[o],q=c.max(i,b);if(h)l[o]=h[e]+(m?0:p-j.offset()[e]),f.margin&&(l[o]-=parseInt(k.css("margin"+d))||0,l[o]-=parseInt(k.css("border"+d+"Width"))||0),l[o]+=n[e]||0,f.over[e]&&(l[o]+=k["x"==b?"width":"height"]()*f.over[e]);else{var r=k[e];l[o]=r.slice&&"%"==r.slice(-1)?parseFloat(r)/100*q:r}f.limit&&/^\d+$/.test(l[o])&&(l[o]=l[o]<=0?0:Math.min(l[o],q)),!a&&f.queue&&(p!=l[o]&&g(f.onAfterFirst),delete l[o])}),g(f.onAfter)}}).end()},c.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])},c})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):b(jQuery)});